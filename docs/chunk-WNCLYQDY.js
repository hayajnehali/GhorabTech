import{bb as a}from"./chunk-SZRI5CIQ.js";import{ib as s,pb as i,rb as r}from"./chunk-B6JOQ4YJ.js";var n=class c extends a{constructor(t,e){super();this.service=t;this.itemType=e;this.type=e,this.entity=new this.type}entity;isAdd=!1;type;ngOnInit(){let t=this.activatedRoute.snapshot.paramMap.get("id");t!=null?(this.isAdd=!1,this.getById(t)):this.isAdd=!0,this.onInitData()}onInitData(){}getById(t){let e=this.service.getById(t).subscribe({next:o=>{let h=Object.assign(new this.type,o);this.entity=h.data,this.onLoadedData(this.entity)}});this.subscribe(e)}onLoadedData(t){}save(t){if(t.invalid){t.control.markAllAsTouched();return}this.processData(),this.isAdd?this.add():this.edit()}edit(){let t=this.service.update(this.entity).subscribe({next:()=>{},complete:()=>{this.notificationService.showSuccess(this.translate.instant("general.success-message"),this.translate.instant("general.success")),this.goBack()},error:e=>{this.notificationService.showError(e)}});this.subscribe(t)}add(){let t=this.service.create(this.entity).subscribe({next:()=>{},complete:()=>{this.notificationService.showSuccess(this.translate.instant("general.success-message"),this.translate.instant("general.success")),this.goBack()},error:e=>{this.notificationService.showError(e)}});this.subscribe(t)}processData(){}goBack(){let t=this.routeTrackerService.getPreviousUrl();t?this.router.navigateByUrl(t):this.router.navigateByUrl("/")}static \u0275fac=function(e){s()};static \u0275dir=i({type:c,features:[r]})};export{n as a};
