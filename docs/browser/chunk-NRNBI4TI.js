import{a as we}from"./chunk-YQS7ZP4E.js";import{a as Ae}from"./chunk-ILMIZU2T.js";import{b as Pe,c as Se}from"./chunk-EWRMB3JE.js";import{a as Ce}from"./chunk-VXQZIKF5.js";import{a as O}from"./chunk-YSOCNODP.js";import{a as be,b as _e}from"./chunk-3CRHCH4U.js";import{a as W}from"./chunk-42SQEH5X.js";import{d as T}from"./chunk-CPXUQUKI.js";import{a as Me}from"./chunk-TLDT65VQ.js";import"./chunk-7A76ZNDX.js";import"./chunk-KU6GPCNL.js";import"./chunk-PAM4ZUHI.js";import{A as ne,Aa as ge,B as re,Ba as fe,C as oe,D as ae,Da as ye,E as pe,F as le,G as de,K as me,M as ce,N as se,Pa as ve,Ta as F,aa as ue,b as B,c as Y,db as he,f as Z,o as $,r as k,t as ee,v as te,x as ie}from"./chunk-X4WIL7KK.js";import{$b as H,Ac as C,Bc as M,Cc as L,Jc as c,Kb as A,Kc as s,Mb as x,Nb as J,Pb as U,Qb as G,Rb as m,Sb as n,Tb as i,Ub as u,Xa as t,Z as j,ba as K,ec as N,ga as y,gc as R,ha as v,ib as S,ob as V,pb as q,qc as w,sb as z,sc as Q,tb as P,tc as X,uc as d,vc as b,wc as _,xc as E,zc as h}from"./chunk-QR74OZQX.js";import"./chunk-4CLCTAJ7.js";function Ne(r,p){r&1&&(d(0),c(1,"translate")),r&2&&_(" ",s(1,1,"createProduct")," ")}function Re(r,p){r&1&&(d(0),c(1,"translate")),r&2&&_(" ",s(1,1,"updateProduct")," ")}function Le(r,p){r&1&&(n(0,"div",24),d(1),c(2,"translate"),i()),r&2&&(t(),_(" ",s(2,1,"validation.price-must-be-less-than-before-discount")," "))}function je(r,p){if(r&1&&(n(0,"mat-option",39),d(1),i()),r&2){let e=p.$implicit;m("value",e.id),t(),_(" ",e.value.local??""," ")}}function Ke(r,p){if(r&1&&(n(0,"mat-optgroup",37),P(1,je,2,2,"mat-option",38),i()),r&2){let e=p.$implicit;m("label",e.name.local??""),t(),m("ngForOf",e.keyAttributeValues)}}var I=class r extends Me{constructor(e){super(e,be);this.productService=e}keyAttributeService=K(we);keyAttributeList=[];keyAttributeValueId=[];ngOnInit(){this.entity.productCategoryId=this.activatedRoute.snapshot.paramMap.get("productCategoryid")??void 0;let e=this.activatedRoute.snapshot.paramMap.get("productId");e!=null?(this.isAdd=!1,this.getById(e)):this.isAdd=!0,this.getKeyAttribute()}onLoadedData(e){this.keyAttributeValueId=e.keyAttributeValues?.map(l=>l.id)}getKeyAttribute(){this.keyAttributeService.getAll(new Pe).subscribe(e=>{this.keyAttributeList=e.data??[]})}processData(){this.keyAttributeValueId?.forEach(e=>{let l=new Se;l.id=e,this.entity.keyAttributeValues||(this.entity.keyAttributeValues=[]),this.entity.keyAttributeValues.find(o=>o.id==e)||this.entity.keyAttributeValues.push(l)})}static \u0275fac=function(l){return new(l||r)(S(O))};static \u0275cmp=V({type:r,selectors:[["app-product-manage"]],standalone:!1,features:[z],decls:74,vars:60,consts:[["productForm","ngForm"],["nameEn","ngModel"],["nameAr","ngModel"],["priceBeforeDiscount","ngModel"],["price","ngModel"],["count","ngModel"],["descriptionEn","ngModel"],["descriptionAr","ngModel"],[1,"container","manage"],[1,"title"],[3,"ngSubmit"],[1,"row"],[1,"form-group","col-6"],["for","nameEn"],["type","text","maxlength","100","minlength","3","id","nameEn","required","","name","nameEn",1,"form-control",3,"ngModelChange","ngModel"],[3,"control","fieldName"],["for","nameAr"],["type","text","maxlength","100","id","nameAr","required","","name","nameAr",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","col-3"],["for","priceBeforeDiscount"],["type","number","id","priceBeforeDiscount","name","priceBeforeDiscount","step","1",1,"form-control",3,"ngModelChange","ngModel"],[3,"control"],["for","price"],["type","number","id","price","name","price","required","","step","1","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"error"],["for","count"],["type","number","id","count","required","","name","count","required","",1,"form-control",3,"ngModelChange","ngModel"],["multiple","",1,"form-control",3,"valueChange","value"],[3,"label",4,"ngFor","ngForOf"],["for","description"],["id","descriptionEn","name","descriptionEn","maxlength","500",1,"form-control",3,"ngModelChange","rows","ngModel"],["id","descriptionAr","maxlength","500","name","descriptionAr",1,"form-control",3,"ngModelChange","rows","ngModel"],[1,"form-group"],[3,"imagesChange","aspectRatio","images"],[1,"btn-container"],[1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary","mx-2"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(l,o){if(l&1){let g=H();n(0,"div",8)(1,"h2",9),A(2,Ne,2,3)(3,Re,2,3),i(),n(4,"form",10,0),N("ngSubmit",function(){y(g);let a=w(5);return v(o.save(a))}),n(6,"div",11)(7,"div",12)(8,"label",13),d(9),c(10,"translate"),i(),n(11,"input",14,1),M("ngModelChange",function(a){return y(g),C(o.entity.name.english,a)||(o.entity.name.english=a),v(a)}),i(),u(13,"app-form-error",15),c(14,"translate"),i(),n(15,"div",12)(16,"label",16),d(17),c(18,"translate"),i(),n(19,"input",17,2),M("ngModelChange",function(a){return y(g),C(o.entity.name.arabic,a)||(o.entity.name.arabic=a),v(a)}),i(),u(21,"app-form-error",15),c(22,"translate"),i(),n(23,"div",18)(24,"label",19),d(25),c(26,"translate"),i(),n(27,"input",20,3),M("ngModelChange",function(a){return y(g),C(o.entity.priceBeforeDiscount,a)||(o.entity.priceBeforeDiscount=a),v(a)}),i(),u(29,"app-form-error",21),i(),n(30,"div",18)(31,"label",22),d(32),c(33,"translate"),i(),n(34,"input",23,4),M("ngModelChange",function(a){return y(g),C(o.entity.price,a)||(o.entity.price=a),v(a)}),i(),u(36,"app-form-error",21),A(37,Le,3,3,"div",24),i(),n(38,"div",18)(39,"label",25),d(40),c(41,"translate"),i(),n(42,"input",26,5),M("ngModelChange",function(a){return y(g),C(o.entity.count,a)||(o.entity.count=a),v(a)}),i(),u(44,"app-form-error",21),i(),n(45,"div",18)(46,"mat-label"),d(47),c(48,"translate"),i(),n(49,"mat-select",27),M("valueChange",function(a){return y(g),C(o.keyAttributeValueId,a)||(o.keyAttributeValueId=a),v(a)}),P(50,Ke,2,2,"mat-optgroup",28),i()(),n(51,"div",12)(52,"label",29),d(53),c(54,"translate"),i(),n(55,"textarea",30,6),M("ngModelChange",function(a){return y(g),C(o.entity.description.english,a)||(o.entity.description.english=a),v(a)}),i(),u(57,"app-form-error",21),i(),n(58,"div",12)(59,"label",29),d(60),c(61,"translate"),i(),n(62,"textarea",31,7),M("ngModelChange",function(a){return y(g),C(o.entity.description.arabic,a)||(o.entity.description.arabic=a),v(a)}),i(),u(64,"app-form-error",21),i(),n(65,"div",32)(66,"app-multi-image-upload",33),M("imagesChange",function(a){return y(g),C(o.entity.images,a)||(o.entity.images=a),v(a)}),i()(),n(67,"div",34)(68,"button",35),N("click",function(){return y(g),v(o.goBack())}),d(69),c(70,"translate"),i(),n(71,"button",36),d(72),c(73,"translate"),i()()()()()}if(l&2){let g=w(12),f=w(20),a=w(28),Ee=w(35),Be=w(43),ke=w(56),Fe=w(63);t(2),x(o.isAdd?2:3),t(7),b(s(10,36,"nameEn")),t(2),h("ngModel",o.entity.name.english),t(2),m("fieldName",L(s(14,38,"nameEn")))("control",g),t(4),b(s(18,40,"nameAr")),t(2),h("ngModel",o.entity.name.arabic),t(2),m("fieldName",L(s(22,42,"nameAr")))("control",f),t(4),b(s(26,44,"general.price-before-discount")),t(2),h("ngModel",o.entity.priceBeforeDiscount),t(2),m("control",a),t(3),b(s(33,46,"price")),t(2),h("ngModel",o.entity.price),t(2),m("control",Ee),t(),x(o.entity&&o.entity.price&&o.entity.priceBeforeDiscount&&o.entity.price>=o.entity.priceBeforeDiscount?37:-1),t(3),b(s(41,48,"count")),t(2),h("ngModel",o.entity.count),t(2),m("control",Be),t(3),_(" ",s(48,50,"keyAttribute.key-attribute-list")),t(2),h("value",o.keyAttributeValueId),t(),m("ngForOf",o.keyAttributeList),t(3),b(s(54,52,"descriptionEn")),t(2),m("rows",3),h("ngModel",o.entity.description.english),t(2),m("control",ke),t(3),b(s(61,54,"descriptionAr")),t(2),m("rows",3),h("ngModel",o.entity.description.arabic),t(2),m("control",Fe),t(2),m("aspectRatio",1/1),h("images",o.entity.images),t(3),_(" ",s(70,56,"general.back")," "),t(3),_(" ",s(73,58,"general.save")," ")}},dependencies:[B,le,ne,de,re,oe,me,ce,se,pe,ae,ue,ye,fe,ge,W,F,k],styles:[".fixed-size-image[_ngcontent-%COMP%]{width:100%;height:300px;object-fit:cover;border-radius:8px;box-shadow:0 4px 8px #0000001a}.thumbnail-gallery[_ngcontent-%COMP%]   .img-thumbnail[_ngcontent-%COMP%]{height:60px;width:100%;object-fit:cover;cursor:pointer;transition:transform .2s}.thumbnail-gallery[_ngcontent-%COMP%]   .img-thumbnail[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 4px 8px #0003}"]})};function qe(r,p){if(r&1&&(n(0,"div",27),u(1,"app-image",28),i()),r&2){let e=p.$implicit,l=p.index;Q("active",l===0),t(),X("img"),m("src",e.guidName)}}function ze(r,p){if(r&1&&(n(0,"div",19)(1,"div",20),P(2,qe,2,5,"div",21),i(),n(3,"button",22),u(4,"span",23),n(5,"span",24),d(6,"Previous"),i()(),n(7,"button",25),u(8,"span",26),n(9,"span",24),d(10,"Next"),i()()()),r&2){let e=R();t(2),m("ngForOf",e.product.images)}}function Je(r,p){if(r&1&&(n(0,"div",29),u(1,"app-image",28),i()),r&2){let e=p.$implicit;t(),m("src",e.guidName)}}function Ue(r,p){if(r&1&&(n(0,"span",15),d(1),c(2,"translate"),i()),r&2){let e=R();t(),E(" ",e.product.priceBeforeDiscount," ",s(2,2,"general.JOD")," / ")}}function Ge(r,p){if(r&1&&(n(0,"span"),d(1),i()),r&2){let e=p.$implicit,l=p.last;t(),E(" ",e.value.local,"",l?"":", "," ")}}function He(r,p){if(r&1&&(n(0,"div",12)(1,"span",17),d(2),P(3,Ge,2,2,"span",30),i()()),r&2){let e=p.$implicit;t(2),_(" ",e.name.local,": "),t(),m("ngForOf",e.keyAttributeValues)}}var D=class r{constructor(p,e,l,o){this.router=p;this.productService=e;this.notificationService=l;this.activatedRoute=o}product=new _e;environment=$;keyAttributes=[];ngOnInit(){this.getProductById()}getProductById(){let p=this.activatedRoute.snapshot.paramMap.get("productId");p!=null&&this.productService.getById(p).subscribe(e=>{e.data&&(this.product=e.data,this.getKeyAttribute())})}goToSlide(p){}getKeyAttribute(){this.product.keyAttributeValues&&this.product.keyAttributeValues.forEach(p=>{this.keyAttributes.find(e=>e.id==p.keyAttribute.id)||this.keyAttributes.push(p.keyAttribute),this.keyAttributes.find(e=>e.id==p.keyAttribute.id)?.keyAttributeValues||(this.keyAttributes.find(e=>e.id==p.keyAttribute.id).keyAttributeValues=[]),this.keyAttributes.find(e=>e.id==p.keyAttribute.id)?.keyAttributeValues?.push(p)})}static \u0275fac=function(e){return new(e||r)(S(te),S(O),S(he),S(ee))};static \u0275cmp=V({type:r,selectors:[["app-product-view"]],standalone:!1,decls:28,vars:10,consts:[[1,"container","my-5","product-view"],[1,"row"],[1,"mb-3"],[1,"section-title","section-title-center","m-0"],["aria-hidden","true"],[1,"section-title-main","m-0"],[1,"col-md-6","image-gallery"],["id","productImageCarousel","class","carousel slide w-100","data-bs-ride","carousel",4,"ngIf"],[1,"row","w-100","thumbnail-gallery"],["class","col-2 p-1",4,"ngFor","ngForOf"],[1,"col-md-6","product-info"],[1,"customization"],[1,"customization-item","d-flex","justify-content-between","align-items-center"],[1,"text-titel","py-1","px-2"],[1,"customization-item"],[1,"text-muted","text-decoration-line-through","py-1","px-2"],[1,"text-danger","fw-bold","py-1","px-2"],[1,"text-description","py-1","px-2"],[1,"mx-5"],["id","productImageCarousel","data-bs-ride","carousel",1,"carousel","slide","w-100"],[1,"carousel-inner"],["class","carousel-item",3,"active",4,"ngFor","ngForOf"],["type","button","data-bs-target","#productImageCarousel","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#productImageCarousel","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"carousel-item"],["alt","Thumbnail Image",3,"src"],[1,"col-2","p-1"],[4,"ngFor","ngForOf"]],template:function(e,l){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),u(4,"b",4),n(5,"span",5),d(6),i(),u(7,"b",4),i()(),n(8,"div",6),P(9,ze,11,1,"div",7),n(10,"div",8),P(11,Je,2,1,"div",9),i()(),n(12,"div",10)(13,"div",11)(14,"div",12)(15,"h2",13),d(16),i()(),n(17,"div",14),A(18,Ue,3,4,"span",15),n(19,"span",16),d(20),c(21,"translate"),i()(),n(22,"div",12)(23,"span",17),d(24),i()(),U(25,He,4,2,"div",12,J),i()()()(),u(27,"hr",18)),e&2&&(t(6),b(l.product.name.local),t(3),m("ngIf",l.product.images&&l.product.images.length>0),t(2),m("ngForOf",l.product.images),t(5),b(l.product.name.local),t(2),x(l.product.priceBeforeDiscount!=null&&l.product.priceBeforeDiscount>0?18:-1),t(2),E(" ",l.product.price," ",s(21,8,"general.JOD")," "),t(4),b(l.product.description.local),t(),G(l.keyAttributes))},dependencies:[B,Y,T,k],styles:[".fixed-size-image[_ngcontent-%COMP%]{width:100%;height:300px;object-fit:cover;border-radius:8px;box-shadow:0 4px 8px #0000001a}.thumbnail-gallery[_ngcontent-%COMP%]   .img-thumbnail[_ngcontent-%COMP%]{height:60px;width:100%;object-fit:cover;cursor:pointer;transition:transform .2s}.thumbnail-gallery[_ngcontent-%COMP%]   .img-thumbnail[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 4px 8px #0003}"]})};var Ie=[{path:"",component:Ce},{path:"manage",component:I},{path:"manage/:productId",component:I},{path:"productView/:productId",component:D}];var Ve=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=q({type:r});static \u0275inj=j({imports:[Z,ve,ie.forChild(Ie),W,T,F,Ae]})};export{Ve as ProductModule};
