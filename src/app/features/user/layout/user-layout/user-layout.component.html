<mat-sidenav-container autosize>
  <mat-sidenav
    mode="over"
    position="start"
    [opened]="spinnerService.isSideBarOpen()"
  >
    <div class="d-flex justify-content-end m-3">
      <button mat-icon-button (click)="spinnerService.toggleSideBar()">
        <mat-icon>arrow_back</mat-icon>
      </button>
    </div>
    <app-navbar
      [categoryResult]="categoryResult"
      [productCategories]="productCategories"
      [cartCount]="cartCount"
      [cartTotal]="cartTotal"
    ></app-navbar>
  </mat-sidenav>
  <mat-sidenav mode="over" position="end" [opened]="spinnerService.isOpen()">
    <div class="d-flex justify-content-end m-3">
      <button mat-icon-button (click)="spinnerService.toggleSideCart()">
        <mat-icon>arrow_back</mat-icon>
      </button>
    </div>
    <app-card-sidenav
      (closeSideNav)="spinnerService.closeSideCart()"
    ></app-card-sidenav>
  </mat-sidenav>
  <mat-sidenav-content>
    <!-- Offcanvas Menu Begin -->
    <div class="offcanvas-menu-overlay"></div>
    <!-- Header Section Begin -->
    <header class="header shadow-sm">
      <!-- Top Bar -->
      <app-top-bar> </app-top-bar>
      <!-- Main Header -->
      <div class="container py-3 containerMenu">
        <div class="row align-items-center">
          <!-- Search + Lang -->
          <div
            class="col-2 col-md-4 mb-2 mb-md-0 d-flex flex-wrap justify-content-between"
          >
            @if ((responsiveService.isMobile$ | async)) {
            <mat-icon class="menu-icon" (click)="spinnerService.toggleSideBar()"
              >menu</mat-icon
            >
            }@else {
            <app-search class="search-wrapper flex-grow-1 me-2"
              >></app-search
            >
            <app-language-button
              class="lang mt-2 mt-sm-0 d-flex align-items-center"
            ></app-language-button>
            }
          </div>

          <!-- Logo -->
          <div class="col-8 col-md-4 text-center mb-2 mb-md-0" [routerLink]="['/user']">
            <img
              src="./assets/img/R.png"
              alt="Logo"
              style="height: 70px; width: auto"
              class="img-fluid"
            />
          </div>

          <!-- Cart -->
          <div class="col-2 col-md-4 text-md-end text-center mt-2">
            <p class="mb-0 d-inline-flex" style="text-align: end">
              @if (!(responsiveService.isMobile$ | async)) {
              <app-login-logout-button></app-login-logout-button>
              }
              <a
                (click)="spinnerService.toggleSideCart()"
                class="text-dark position-relative mx-2"
                aria-label="Shopping cart"
              >
                <i class="fa fa-shopping-cart fs-5"></i>
                <span
                  class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                  >{{ cartCount }}</span
                >
              </a>
              @if (!(responsiveService.isMobile$ | async)) {
              <span> {{ "general.JOD" | translate }} {{ cartTotal }}</span
              >}
            </p>
          </div>
        </div>

        <hr class="mb-0" />
        @if( !(responsiveService.isMobile$ | async)){
        <app-navbar
          [categoryResult]="categoryResult"
          [productCategories]="productCategories"
          [cartCount]="cartCount"
          [cartTotal]="cartTotal"
        ></app-navbar>
        }
      </div>
    </header>
    <router-outlet></router-outlet>
    <app-footer></app-footer>
  </mat-sidenav-content>
</mat-sidenav-container>
<a class="btn-whatsapp" (click)="openWhatsApp()" target="_blank">
  <i class="fa fa-whatsapp"></i>{{ "general.whatsAppNumber" | translate }}
</a>
